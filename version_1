var isDrawing=false; //to check 是否正在繪圖狀態
var color="#000000"; //default color is black
/*
0=>red 
1=>green 
2=>black
*/
var shape=0;
/*
0=>rectangle 
1=>round 
2=>triangle 
3=>default
*/
function InitPainter(div)
{
    /*add a title*/
    var title=document.createElement('H1');
    title.innerHTML='painter';
    document.getElementById(div).appendChild(title);
    /*background*/
    //document.body.style.background="#f44242";

    /*to layout the canvas*/
    canvas=document.createElement('canvas');
    canvas.width=500;
    canvas.height=400;
    //canvas.background-color="#ffffff";
    canvas.style="border:1px solid #000000";
    document.getElementById(div).appendChild(canvas);

    //to draw line
    ctx=canvas.getContext("2d");
    ctx.strokeStyle='#000000';
    ctx.lineWidth=10;
    
    //event binding
    canvas.addEventListener('mouseup',()=>isDrawing=false);
    canvas.addEventListener('mouseout',()=>isDrawing=false);
    canvas.addEventListener('mousedown',(e)=>
    {
        isDrawing=true;//allow to draw
        //begin to draw
        ctx.moveTo(e.offsetX,e.offsetY);
        ctx.beginPath();
    });
    canvas.addEventListener('mousemove',draw);

    /*add a sub-title*/
    var title=document.createElement('h3');
    title.innerHTML='Brush Shape';
    document.getElementById(div).appendChild(title);

    //add a button rectangle
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Rectangle";
    button.addEventListener('click',()=>Shape(0));
    document.getElementById(div).appendChild(button);

    //add a button round
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Round";
    button.addEventListener('click',()=>Shape(1));
    document.getElementById(div).appendChild(button);

    //add a button triangle
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Triangle";
    button.addEventListener('click',()=>Shape(2));
    document.getElementById(div).appendChild(button);

    //add a button butt
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Default";
    button.addEventListener('click',()=>Shape(3));
    document.getElementById(div).appendChild(button);

    /*add a sub-title*/
    var title=document.createElement('h3');
    title.innerHTML='Brush Color';
    document.getElementById(div).appendChild(title);

    //choose color : red
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Red";
    button.addEventListener('click',()=>Color(0));
    document.getElementById(div).appendChild(button);

    //choose color : green
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Green";
    button.addEventListener('click',()=>Color(1));
    document.getElementById(div).appendChild(button);

    //choose color : black
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Black";
    button.addEventListener('click',()=>Color(2));
    document.getElementById(div).appendChild(button);

    /*add a sub-title*/
    var title=document.createElement('h3');
    title.innerHTML='Eraser';
    document.getElementById(div).appendChild(title);

    //an eraser 
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Eraser";
    button.addEventListener('click',()=>Color(3));
    document.getElementById(div).appendChild(button);

    //a reset button 
    var button=document.createElement('button');
    button.type="button";
    button.innerHTML="Reset";
    button.addEventListener('click',()=>Reset());
    document.getElementById(div).appendChild(button);

    /*css*/
    var css=document.createElement("style");
    css.type="text/css";
    css.innerHTML="strong{color:lightblue}";
    document.getElementById(div).appendChild(css);
  

    function newFunction() {
        return Color(0);
    }
}
function draw(e)
{
    //看是不是在畫畫的狀態
    if(!isDrawing)
    {
        return;
    }
    ctx.strokeStyle=color;
    ctx.lineCap=shape;
    //line to the place where the mouse is
    ctx.lineTo(e.offsetX,e.offsetY);
    ctx.stroke();
}
function Color(e)
{
    /*red*/
    if (e==0)
    {
        color="#cc0000"
    }
    //green
    else if (e==1)
    {
        color = "#00cc00"
    } 
    //black
    else if (e==2)
    {
        color = "#000000"
    } 
    //eraser
    else if (e==3)
    {
        color="#ffffff"
    }
    //alert("you got the color"+color);
};
function Shape(e)
{
    //rectangle
    if (e==0)
    {
        shape ='square'
    }
    //round 
    else if (e==1)
    {
        shape='round'
    } 
    //triangle
    else if (e==2)
    {
        //it is still round!!!!!!!
        shape = 'round'
    } 
    //default shape
    else if (e==3)
    {
        shape = 'butt'
    } 
    //alert("you got the shape " + shape);
};
function Reset()
{
    //init all the variable
    isDrawing=false; 
    color="#000000"; 
    shape=0;

    ctx.clearRect(0,0,500,400);
    //alert("you reset");
}
/*
ok
brush and eraser
color selector
simple menu
reset
brush shape

not yet
cursor icon
undo/redo button
dowload
*/
